{% extends "base.html" %}
{% load static %}

{% block content %}
{% include "includes/header.html" %}
<section class="counter-up pt120">
    <div class="container">
        <div class="row">
            <div class="col-12 wow fadeInUp">
                <div class="counter-title text-center">
                    <h2>Şirketlerin <span>Başarılarına</span> Güvenin</h2>
                </div>
            </div>

            <div class="col-xl-3 col-md-6 col-12 wow fadeIn">
                <div class="counter-item">
                    <div class="cicon">
                        <svg fill="none" viewBox="0 0 30 22"><path fill="#0D5FF9" d="M14.21.765c-1.747.258-3.141 1.454-3.675 3.159-.193.632-.193 1.822 0 2.46.598 1.917 2.291 3.165 4.301 3.17.774 0 1.248-.105 1.951-.445.938-.451 1.57-1.084 2.051-2.033.358-.709.457-1.225.428-2.115-.024-.575-.059-.809-.188-1.184a4.387 4.387 0 00-1.084-1.734c-.72-.721-1.57-1.137-2.601-1.278-.516-.07-.68-.07-1.184 0zm1.728 1.108A3.55 3.55 0 0118.17 4.11c.182.557.2 1.488.03 1.98-.428 1.266-1.296 2.086-2.543 2.409-1.131.287-2.327-.024-3.211-.85-.463-.428-.727-.838-.944-1.453-.199-.568-.21-1.459-.023-2.039.369-1.16 1.465-2.162 2.613-2.397.475-.093 1.406-.04 1.846.112zM23.32 3.835c-1.184.27-2.215 1.213-2.584 2.373-.147.445-.176 1.395-.059 1.816.158.575.475 1.114.902 1.553.48.48.803.686 1.395.885.885.299 1.775.229 2.666-.205 2.332-1.154 2.549-4.412.392-5.889-.773-.527-1.828-.732-2.712-.533zm1.47 1.002c.446.135.75.328 1.102.697 1.166 1.23.768 3.182-.797 3.908-1.02.48-2.338.153-3.018-.744-.369-.48-.48-.843-.486-1.523 0-.54.018-.615.188-.985a2.628 2.628 0 011.57-1.365c.334-.105 1.066-.1 1.441.012zM5.22 4.076a3.533 3.533 0 00-2.168 1.46 3.392 3.392 0 00.445 4.341c.61.603 1.606 1.02 2.45 1.02 1.459 0 2.865-1.043 3.316-2.461.188-.575.176-1.465-.023-2.04-.211-.603-.475-1.019-.932-1.447a3.416 3.416 0 00-3.088-.873zm1.752 1.12c.703.333 1.137.831 1.36 1.564.351 1.148-.223 2.396-1.342 2.924-.756.351-1.77.275-2.444-.194-.357-.24-.732-.668-.884-1.013-.61-1.336.058-2.883 1.47-3.381.276-.094.457-.117.903-.1.48.012.609.041.937.2zM14.297 10.175c-1.793.176-3.51.92-4.764 2.068l-.398.37-.569-.27c-.691-.328-1.166-.475-1.857-.568-2.748-.387-5.496 1.312-6.398 3.955C.07 16.433 0 17.025 0 18.279c0 1.154 0 1.16.164 1.47.117.229.24.364.451.492l.281.176 2.971.018 2.977.018.035.234a1.5 1.5 0 00.504.896c.498.452-.13.416 7.617.416 7.746 0 7.12.036 7.617-.416.334-.298.48-.615.516-1.09l.03-.392 2.935-.018c2.086-.011 2.982-.04 3.088-.087.257-.112.591-.44.703-.692.093-.2.111-.398.111-1.383 0-1.248-.07-1.84-.31-2.543a5.924 5.924 0 00-3.82-3.738c-1.624-.51-3.517-.281-4.917.586l-.287.182-.363-.311c-1.659-1.406-3.914-2.133-6.006-1.922zm1.91 1.043a7.164 7.164 0 015.83 5.608c.1.492.129.867.147 2.056.029 1.576 0 1.834-.252 2.027-.153.124-.182.124-6.932.124-6.709 0-6.785 0-6.932-.118-.252-.199-.275-.386-.252-1.992.018-1.254.041-1.594.147-2.097a7.185 7.185 0 015.777-5.602c.633-.111 1.828-.117 2.467-.006zm9.1 1.266a4.996 4.996 0 013.58 3.592c.1.392.117.65.117 1.675 0 .862-.018 1.225-.07 1.278-.053.052-.78.07-2.924.07h-2.848l-.035-1.014c-.053-1.465-.275-2.361-.896-3.562a8.797 8.797 0 00-.587-.967l-.31-.428.193-.123c1.032-.633 2.526-.838 3.78-.521zm-18.147.369c.498.123 1.277.457 1.277.539 0 .018-.11.187-.24.387-.345.504-.843 1.57-1.02 2.185-.228.785-.322 1.535-.322 2.56v.927H3.99c-2.443 0-2.87-.012-2.935-.088-.053-.065-.065-.428-.047-1.418.023-1.196.04-1.383.158-1.746.574-1.747 1.957-3.012 3.727-3.399.603-.135 1.628-.111 2.267.053z"/></svg>
                    </div>
                    <h4><span class="cnumb">{{ company_count }}</span></h4>
                    <p>
                        Şirket
                    </p>
                </div>
            </div><!-- End Col -->

            <div class="col-xl-3 col-md-6 col-12 wow fadeIn">
                <div class="counter-item">
                    <div class="cicon">
                        <svg fill="none" viewBox="0 0 30 23"><path fill="#0D5FF9" d="M14.403.2c-.217.029-.598.128-.85.222C12.92.657.83 6.443.588 6.625c-.293.223-.527.58-.574.88-.094.644.287 1.13 1.302 1.641l.668.34v5.464l-.281.182c-.61.393-.904 1.15-.716 1.83.094.345.393.756.674.926.141.087.264.181.264.21a307.2 307.2 0 01-1.507 4.82c-.023.07.335.082 2.152.082 1.947 0 2.176-.012 2.146-.088-.093-.246-1.5-4.76-1.5-4.82 0-.034.076-.093.17-.128.562-.24.961-1.173.773-1.853-.1-.387-.387-.78-.71-.979l-.292-.182V12.53c0-1.337.017-2.427.04-2.427.024 0 .435.187.91.422l.867.416v3.64c0 3.607 0 3.642.124 3.847.193.317 1.489 1.571 2.075 2.005a12.9 12.9 0 006.01 2.433c.892.117 2.686.117 3.578 0 2.24-.305 4.222-1.108 6.01-2.427.64-.475 1.959-1.782 2.1-2.081.087-.194.099-.522.099-3.794v-3.588l2.14-1.05c1.179-.574 2.246-1.13 2.375-1.23.328-.258.551-.745.51-1.085a1.46 1.46 0 00-.504-.915C29.139 6.39 16.937.451 16.38.311c-.528-.135-1.443-.188-1.977-.112zm1.765 1.195c.176.053 2.616 1.22 5.424 2.592C24.402 5.359 27.18 6.719 27.761 7c.586.287 1.085.563 1.102.616.024.058-.005.146-.064.217-.106.117-4.24 2.18-4.51 2.245a.435.435 0 00-.199.112c-.035.04-1.806.92-3.946 1.952-2.88 1.395-3.97 1.894-4.228 1.94-.492.088-1.231.077-1.67-.023-.247-.058-1.801-.774-4.487-2.064-2.263-1.084-4.362-2.087-4.667-2.233-.305-.147-.528-.276-.499-.282.036-.012 2.422-.299 5.307-.639 5.647-.662 5.47-.633 5.594-.99.076-.2-.006-.429-.211-.581l-.158-.117-6.087.715c-3.348.393-6.151.715-6.233.721-.2.012-1.613-.68-1.665-.815-.03-.076 0-.135.1-.211.146-.111 11.82-5.746 12.442-6.004a3.37 3.37 0 011.613-.281c.305.012.697.07.873.117zm-6.52 11.732c1.93.92 3.63 1.724 3.782 1.782.147.065.493.159.756.211.622.123 1.724.082 2.252-.082.194-.058 1.923-.88 3.847-1.817 1.917-.944 3.506-1.712 3.53-1.712.023 0 .04 1.448.04 3.218v3.22l-.416.445c-1.29 1.378-3.154 2.497-5.09 3.054-2.028.58-4.467.61-6.455.077-1.173-.311-2.545-.927-3.495-1.56-.651-.44-1.665-1.302-2.029-1.73l-.281-.328v-3.224c0-1.777.011-3.23.029-3.23.012 0 1.6.755 3.53 1.676z"/></svg>
                    </div>
                    <h4><span class="cnumb">{{ office_count }}</span></h4>
                    <p>
                        Ofis
                    </p>
                </div>
            </div><!-- End Col -->

            <div class="col-xl-3 col-md-6 col-12 wow fadeIn">
                <div class="counter-item">
                    <div class="cicon">
                        <svg fill="none" viewBox="0 0 30 30"><path fill="#0D5FF9" d="M8.848 10.015c-.13.123-.147.194-.147.557 0 .363.018.433.147.556.088.094.21.147.322.147a.457.457 0 00.322-.147c.13-.123.147-.193.147-.556 0-.363-.018-.434-.147-.557a.457.457 0 00-.322-.146.457.457 0 00-.322.146zM14.47 10.015c-.128.123-.146.194-.146.557 0 .363.018.433.147.556a.457.457 0 00.322.147.457.457 0 00.323-.147c.128-.123.146-.193.146-.556 0-.363-.018-.434-.146-.557a.457.457 0 00-.323-.146.457.457 0 00-.322.146zM10.256 14.703c-.686.68 1.09 1.53 2.46 1.172.417-.112.88-.358 1.032-.545.346-.446-.217-1.008-.656-.662-.352.27-.533.328-1.108.328-.574 0-.755-.059-1.107-.328a.454.454 0 00-.621.035z"/><path fill="#0D5FF9" d="M10.693.064C8.977.3 6.686 1.09 4.236 2.285c-1.804.88-1.793.838-.556 2.057l.873.85-.082.234c-.188.545-.252 1.207-.252 2.666v1.453l-.158.088c-.223.117-.452.369-.61.68-.187.351-.228 1.183-.082 1.67.182.638.873 1.142 1.559 1.142.252 0 .228-.053.345.703.141.838.504 1.723 1.05 2.549.292.445 1.16 1.348 1.458 1.523.182.106.188.13.188.475 0 .334-.012.363-.147.398-.088.024-.234.17-.386.405-.135.199-.252.369-.258.38-.006.006-.862.264-1.899.569-1.037.305-2.056.633-2.261.727a5.195 5.195 0 00-2.93 3.785c-.07.398-.088 1.02-.088 2.795v2.279l.146.14.141.147H23.15l.147-.146.146-.147-.017-2.508c-.024-2.338-.03-2.531-.153-2.953a5.575 5.575 0 00-.85-1.764l-.327-.45h7.617l.14-.147.147-.14V2.63l-.146-.14-.141-.147h-12.24l-.27-.37c-.668-.913-1.869-1.529-3.55-1.822-.663-.117-2.38-.17-2.96-.088zm2.204.932c1.412.14 2.63.598 3.263 1.219.393.38.569.691.656 1.137.036.17.077.369.094.439.012.07.158.281.322.469.375.428.668.955.862 1.53.14.427.152.526.175 2.015l.024 1.57h-.328c-.276 0-.358-.023-.475-.146-.146-.141-.146-.159-.146-1.16 0-1.272-.065-1.512-.504-1.958-.55-.556-1.213-.62-2.373-.234-1.242.416-2.801.65-4.33.65-1.014 0-1.12-.011-1.612-.158-1.289-.392-2.677-1.271-4.101-2.578l-.41-.38.644-.306c2.496-1.183 4.336-1.816 5.988-2.074.64-.1 1.454-.111 2.25-.035zm16.166 11.191v8.907h-8.151l-.305-.153a5.908 5.908 0 00-.51-.234c-.17-.059.481-.076 4.003-.076l4.207-.006.14-.146.147-.141v-16.3l-.147-.142-.14-.146H18.018l-.13-.193a.886.886 0 01-.134-.235c0-.023 2.543-.04 5.654-.04h5.654v8.905zm-1.407 0v7.5h-5.49c-3.486 0-5.572-.023-5.701-.058-.158-.047-.258-.14-.451-.44-.164-.246-.305-.392-.399-.416-.135-.035-.146-.058-.146-.41 0-.205.023-.375.047-.375.029 0 .252-.17.498-.375 1.072-.92 1.927-2.42 2.15-3.79.035-.241.076-.487.094-.557.017-.106.076-.13.363-.153.604-.058 1.078-.38 1.365-.925.123-.235.141-.346.141-.938s-.018-.703-.14-.938c-.165-.316-.387-.568-.604-.68l-.164-.087V8.092c0-1.822-.059-2.22-.498-3.305-.041-.094.193-.1 4.447-.1h4.488v7.5zM5.766 6.06c.21.146.421.28.474.31.082.047.082.07-.011.258-.088.164-.112.404-.135 1.36-.03 1.136-.035 1.165-.17 1.277-.094.076-.229.111-.451.111h-.317V8.039c0-1.166.041-1.752.153-2.139.017-.052.04-.1.058-.1.012 0 .194.118.399.259zm10.423.726l.188.188.03 1.16c.023.972.046 1.19.14 1.377.117.24.586.685.72.685.077 0 .083.24.065 1.682-.023 1.482-.041 1.74-.152 2.133-.575 2.092-2.121 3.615-4.207 4.136-.616.153-1.957.141-2.584-.023-2.063-.545-3.563-2.033-4.131-4.113-.112-.393-.13-.65-.153-2.133-.017-1.441-.011-1.682.065-1.682.135 0 .603-.445.72-.685.094-.188.118-.405.141-1.377.018-.65.053-1.178.088-1.213.041-.035.182-.006.41.094a7.201 7.201 0 002.051.468c1.482.088 4.518-.369 5.537-.832.135-.058.322-.082.545-.07.293.018.37.047.527.205zm-11.033 4.47v.95l-.27-.035a.658.658 0 01-.456-.211c-.176-.176-.182-.2-.182-.703 0-.475.012-.54.147-.68.175-.193.316-.258.574-.258l.187-.005v.943zm13.852-.714c.176.176.181.2.181.709 0 .51-.005.533-.181.709a.658.658 0 01-.457.21l-.27.036v-1.91l.27.035c.199.018.322.076.457.211zm-8.754 8.496c1.271.299 2.69.194 3.873-.287l.393-.158.029.357c.017.194.03.358.023.363-.006 0-.65.487-1.43 1.073l-1.423 1.06-1.418-1.06c-.785-.586-1.43-1.073-1.436-1.073a3.32 3.32 0 01.024-.363l.029-.357.393.158c.21.088.638.217.943.287zm-.738 1.922c.726.539 1.318 1.002 1.324 1.02 0 .04-1.272.814-1.342.814-.035 0-1.611-1.84-1.805-2.11-.052-.076-.029-.158.147-.427.117-.182.246-.322.287-.305.035.012.662.469 1.389 1.008zm6.082-.703c.175.27.199.351.146.428-.193.27-1.77 2.109-1.804 2.109-.07 0-1.342-.773-1.342-.814.005-.041 2.695-2.057 2.748-2.057.017 0 .134.152.252.334zm-7.834 1.98c.668.803 1.265 1.512 1.33 1.565a.453.453 0 00.263.105c.118 0 .141.024.106.1a1.961 1.961 0 00-.07.322c-.03.2-.012.24.193.428l.223.205-.188.95c-.1.515-.193.954-.205.966-.041.035-.979-.275-1.43-.48a7.069 7.069 0 01-1.957-1.372c-.832-.843-1.265-1.752-1.324-2.789-.012-.287-.006-.633.024-.756l.052-.228.844-.252c.469-.14.867-.246.885-.24.023.006.586.668 1.254 1.476zM17.812 21l.85.252.047.229c.03.122.035.468.023.755-.105 1.963-1.71 3.686-4.189 4.512-.27.088-.498.146-.516.129a12.913 12.913 0 01-.21-.967l-.188-.95.223-.204c.205-.188.222-.229.193-.428a1.968 1.968 0 00-.07-.322c-.035-.082-.012-.1.117-.1.193 0 .17.024 1.64-1.746.645-.78 1.184-1.418 1.202-1.412.017 0 .41.111.878.252zM3.896 23.203c.229.897.78 1.817 1.524 2.555 3.176 3.146 9.422 3.146 12.598 0 .55-.551.89-1.026 1.2-1.7.3-.632.417-1.107.464-1.869l.035-.632.48.24c.85.422 1.617 1.265 1.987 2.168.275.685.316 1.078.316 3.17v1.927H.938v-1.927c0-2.04.04-2.45.287-3.117.357-.95 1.224-1.864 2.191-2.309l.305-.146.035.632c.023.346.088.797.14 1.008zm8.373-.299l.458.282.164.503.164.504-.668.504-.668.498-.668-.498-.668-.504.164-.504.164-.503.457-.282c.258-.158.504-.281.55-.281.048 0 .294.123.552.281zm-1.136 3.024c.27.199.486.322.586.322.1 0 .316-.123.586-.322.234-.176.445-.323.468-.323.018 0 .1.317.17.71.106.538.123.72.07.773-.099.1-2.49.1-2.59 0-.052-.053-.034-.235.071-.774.07-.392.152-.709.17-.709.024 0 .234.147.469.323z"/></svg>
                    </div>
                    <h4><span class="cnumb">{{ participant_count }}</span></h4>
                    <p>
                        Katılımcı
                    </p>
                </div>
            </div><!-- End Col -->

            <div class="col-xl-3 col-md-6 col-12 wow fadeIn">
                <div class="counter-item">
                    <div class="cicon">
                        <svg fill="none" viewBox="0 0 30 28"><path fill="#0D5FF9" d="M14.535.895c-.105.094-.316.422-.51.81-.176.357-.328.656-.334.662 0 0-.31.052-.68.105-.98.147-1.296.346-1.302.844-.006.323.135.546.686 1.08l.493.48-.112.586c-.181.944-.14 1.214.211 1.49.282.222.622.17 1.366-.2l.645-.328.663.334c.75.375.996.399 1.366.117.322-.246.363-.48.217-1.307l-.123-.692.527-.534c.58-.586.716-.832.634-1.19-.094-.428-.358-.557-1.49-.71l-.475-.07-.345-.68c-.4-.78-.58-.95-1.003-.95a.607.607 0 00-.434.153zm.739 1.384c.428.867.51.92 1.477 1.05.293.034.54.081.54.099 0 .017-.223.258-.493.54-.598.603-.615.673-.463 1.541.065.346.094.628.076.628-.023 0-.293-.13-.592-.294-.739-.392-.88-.387-1.642.012-.322.164-.592.287-.603.276-.012-.012.029-.3.088-.64.158-.855.134-.914-.481-1.553l-.516-.534.68-.093c.451-.065.727-.13.832-.206.083-.058.3-.392.475-.738.176-.346.329-.628.335-.628.011 0 .158.288.334.64zM26.29 8.49c-.141.117-.335.416-.54.833-.176.357-.328.656-.334.662 0 0-.31.053-.68.106-.75.111-1.067.24-1.202.498-.106.2-.117.54-.024.721.036.07.3.364.587.657l.521.527-.128.733c-.124.71-.124.74-.018.956a.844.844 0 00.698.492c.21.024.34-.017.908-.304l.669-.335.627.329c.504.264.686.328.903.328.358 0 .58-.123.704-.375.117-.252.117-.446-.018-1.226l-.106-.633.434-.393c.551-.498.745-.809.704-1.131-.053-.41-.3-.663-.727-.756a24.463 24.463 0 00-.721-.118l-.499-.064-.369-.727c-.281-.557-.41-.756-.563-.844-.293-.182-.574-.159-.827.064zm1.266 2.234c.105.076.375.14.832.205l.68.094-.515.533c-.346.358-.528.593-.552.716-.017.1.012.469.07.82.065.346.1.645.089.657-.006.012-.282-.117-.604-.281zm-.47 2.58c.282.11.47.357.51.662.036.27-.076.516-.34.733l-.187.158-1.044-.018-1.043-.017-.176-.17c-.452-.434-.352-1.085.2-1.331.322-.147 1.723-.159 2.08-.018zM7.236 18.006c-.14.135-.146.176-.146.868 0 .68.006.733.135.85.193.182.469.17.621-.023.112-.14.123-.235.123-.856 0-.663-.006-.704-.146-.839a.483.483 0 00-.293-.146.483.483 0 00-.294.146z"/></svg>
                    </div>
                    <h4><span class="cnumb">100</span>%</h4>
                    <p>
                        Memnuniyet
                    </p>
                </div>
            </div><!-- End Col -->

            <div class="col-12 my-5">
                <form method="POST" class="d-flex justify-content-center align-items-center">
                    {% csrf_token %}
                    <div class="input-group mb-3" style="width:50%;">
                        <input type="text" class="form-control" style="margin-bottom:0;" name="email" placeholder="Email">
                        <button class="btn btn-success" type="submit">Ara</button>
                    </div>
                </form>

            </div>
            {% if participant %}
                <div class="col-12 my-5">
                    <div class="row">
                        <div class="col-4">
                            <h5>Ad: {{ participant.name }}</h5>
                            <h5>Email: {{ participant.email }}</h5>
                            <h5>Ofis: {{ participant.office }}</h5>
                        </div>
                        <div class="col-8">
                            <div class="row">
                            {% for answer in answers %}
                                <div class="col-md-4">
                                    <div class="card">
                                      <img src="{{ answer.presentation.bg_image.url }}" class="card-img-top" alt="...">
                                      <div class="card-body">
                                        <h5 class="card-title">{{ answer.classroom.company }} Şirket İçin</h5>
                                        <p class="card-text">{{ answer.classroom.created_at|date:'d.m.Y H:i' }} Tarihli Etkinlik</p>
                                        <a href="{% url 'preview_answer' answer.id %}" class="btn btn-primary">Gör</a>
                                      </div>
                                    </div>
                                </div>
                            {% empty %}
                                <p>Bir Kayıt yok</p>
                            {% endfor %}
                            </div>
                        </div>
                    </div>
                </div>
            {% endif %}

            <div class="col-12 mt-5">
                <h3 class="mb-4">Tüm Sınıflar</h3>
                <div class="table-responsive">
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>Şirket</th>
                                <th>Sunum</th>
                                <th>Kod</th>
                                <th>Katılımcı Sayısı</th>
                                <th>Cevap Sayısı</th>
                                <th>Durum</th>
                                <th>Oluşturulma Tarihi</th>
                                <th>İşlemler</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for classroom in classrooms %}
                            <tr>
                                <td>{{ classroom.company.name }}</td>
                                <td>{{ classroom.presentation.name }}</td>
                                <td>{{ classroom.code }}</td>
                                <td>{{ classroom.participants.count }}</td>
                                <td>{{ classroom.answers.count }}</td>
                                <td>
                                    <span class="badge {% if classroom.is_active %}bg-success{% else %}bg-danger{% endif %}">
                                        {% if classroom.is_active %}Aktif{% else %}Pasif{% endif %}
                                    </span>
                                </td>
                                <td>{{ classroom.created_at|date:"d.m.Y H:i" }}</td>
                                <td>
                                    <div class="d-flex gap-2">
                                        <a href="{% url 'classroom_answers' classroom.code %}" class="btn btn-primary btn-sm">Detay</a>
                                        {% if classroom.is_active %}
                                            <a href="{% url 'classroom_detail' classroom.code %}" class="btn btn-info btn-sm">
                                                <i class="fas fa-qrcode"></i>
                                            </a>
                                        {% endif %}
                                    </div>
                                </td>
                            </tr>
                            {% empty %}
                            <tr>
                                <td colspan="8" class="text-center">Henüz sınıf bulunmuyor.</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>

        </div>
    </div>
</section>
{% endblock content %}
